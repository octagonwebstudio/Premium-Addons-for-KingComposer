<?php
/**
 *
 * @package Octagon KC Elements
 * @author Octagon
 * @version 1.0
 * @since 1.0
 */

if ( ! defined( 'ABSPATH' ) ) {
	exit; // Exit if accessed directly.
}

wp_enqueue_style( 'octagon-kc-element-image-mask' );

$wrapper_class[] = 'image-mask';
$wrapper_class[] = $shape;
$wrapper_class[] = $ex_class;

$wrapper_class   = array_filter( $wrapper_class );

switch( $shape ) {
	case 'shape1':
		$viewbox = '0 0 1200 1080';
		$path = '<path d="M1200,529.7c0,0-35.9-955.3-809.2-291.5C-382.5,902,158.1,1116.7,590,1070.5
	C1029.2,1023.5,1200,949.6,1200,529.7z" fill="#fff" />';
	break;

	case 'shape2':
		$viewbox = '0 0 1200 1200';
		$path = '<path d="M1129.1,370.7c-11.1-16.5-23.4-31.7-36.6-45.7l0.2,0.1c0,0-217.1-247.2-584.9-315.6l0.2,0.1
	C407.4-13.4,296,4.4,201.5,68C107,131.6,48.5,228,31.9,329.7c-75.1,365.4,71,659,71.9,660.7c8,17.5,17.4,34.5,28.5,51
	c90.2,134,257,187.2,410.2,143.9c0,0,248.2-61,526.7-337.5l0,0C1200.9,721.6,1230,520.8,1129.1,370.7z" fill="#fff"/>';
	break;

	case 'shape3':
		$viewbox = '0 0 1200 866';
		$path = '<path d="M63.1,265.5c0,0-342.8,760.8,569.5,569.5c912.3-191.3,539.6-587.4,156.9-733.8
	C400.2-47.7,227.1-62.2,63.1,265.5z" fill="#fff"/>';
	break;

	case 'shape4':
		$viewbox = '0 0 1200 1200';
		$path = '<path id="XMLID_72_" class="st0" d="M562.6,288.8c1.3,91.4-45.5,182.1-120.6,234.1c-58.5,40.4-129.6,57-196.9,79.9
	C177.8,625.6,109,658.7,71.6,719.2c-43.3,70.2-32.3,166.5,17.8,231.9c50.1,65.5,133.6,100.8,216,102.6s163.5-27.2,233.2-71.2
	c82.5-52,155.1-126.4,250.4-147.3c93.4-20.5,195.5,14.4,284.5-20.7c69.7-27.5,119.4-98.3,124.1-173c4.7-74.8-34.5-150.1-97-191.3
	c-38.9-25.6-85-38.6-123.9-64.1c-60.5-39.7-97.7-105.7-131.5-169.8c-33.8-64-68.1-130.9-125.6-174.9c-47.8-36.7-158.7-69.6-198.3-3
	c-19.5,32.8-2,68.4,8.9,100.8C546.6,187.6,561.9,237.1,562.6,288.8z" fill="#fff"/>';
	break;

	case 'shape5':
		$viewbox = '0 0 1200 942';
		$path = '<path d="M43.8,302.8C10.4,396-0.8,496.1,0,595.2c0.6,73.3,8.3,148.5,40.2,214.2
	c31.9,65.8,91.9,121.1,163.6,130.2c56.8,7.2,113.4-14.6,163.8-42.3c50.4-27.7,97.7-61.7,151.3-82.2c80.6-30.9,173-28.6,252,6.3
	c79.6,35.1,152.3,103.1,238.7,95.4c52.4-4.6,99.5-38.3,129.9-81.9s45.8-96.3,54.1-149.1c9.1-57.3,10.1-117.4-8.9-172.2
	c-19-54.8-60.7-103.6-115.6-119.9c-83.7-24.8-181.3,27.3-257.5-15.6c-67-37.6-80.9-126.8-114.3-196.8
	C656.2,95.2,574.7,29.6,482.3,8.8C280.9-36.8,108.4,122.6,43.8,302.8z" fill="#fff"/>';
	break;

	case 'shape6':
		$viewbox = '0 0 1140 1200';
		$path = '<path d="M634.4,11.6C478.6-19,304.2,9.2,188.1,117.4C98.3,201,52.5,321.8,26.3,441.7
	C-19.3,650.1-11.1,879.4,99,1062c35.7,59.2,85.8,115.1,152.7,132.4c77.4,20,159.9-17,218.6-71.3c80.4-74.4,126.6-177.4,181.2-272.4
	c54.5-95,125.9-189.5,229.6-224.7c71.1-24.1,155.8-20.1,210.7-71.3c43.3-40.3,54.9-106,44.3-164.2
	C1095.2,166.5,837.1,51.6,634.4,11.6z" fill="#fff"/>';
	break;

	case 'shape7':
		$viewbox = '0 0 1200 1096';
		$path = '<path d="M370.2,405.7c-96.3,42.8-204,69.6-279.7,142.9c-76,73.6-107.1,189.3-81.9,292.1
	c25.2,102.8,104.4,189.8,203.1,228.2c98.4,38.2,208.7,29.6,312.2,9.2c138.9-27.4,275.2-75.6,391.9-155.7
	c116.7-80.1,212.8-193.9,257.6-328.2c44.8-134.3,34.3-289.1-41.4-408.7C1077.4,99.2,924.5-30.1,810.6,7.2
	c-50,16.4-75.6,89.8-104.8,129c-41,55.1-88.7,105.3-141.6,149C505.3,333.9,440,374.7,370.2,405.7z" fill="#fff"/>';
	break;

	case 'shape8':
		$viewbox = '0 0 1200 1180';
		$path = '<path d="M496.3,34.1c289.5-126.1,424.9,132.4,505.8,346.8c80.9,214.4,287.2,319.5,154.4,540.9
	c-133.9,223.2-381.7,279.4-498.6,250.5s-238-103.6-383.5-159.7C58,929,4.5,819.2,0.2,710.9c-6.1-153.1,119.3-190,145.2-357.9
	C176.5,151.9,299.8,119.7,496.3,34.1z" fill="#fff"/>';
	break;

	case 'shape9':
		$viewbox = '0 0 1200 1104';
		$path = '<path d="M108.1,140.5c-201,222.7-91.1,528.6,81.4,695c153.8,148.4,419.9,337.2,568.7,242.2
	c108.8-69.4,81.7-199,246.8-329.7c107.3-84.9,134.5-144.4,169.4-204.8c83.5-144.3-38.6-475-348.1-496.9
	C596.5,30.2,316.5-90.3,108.1,140.5z" fill="#fff"/>';
	break;		

	case 'shape10':
		$viewbox = '0 0 1200 797.2';
		$path = '<path d="M573.1,0.4c-77.5-6.2-144.4,53-149.1,130.6c-4.4,71.6-19.5,144.1-71,193.6
		c-34.7,33.3-97.3,55.6-143.6,62.2c-45.9,6.5-95.8-2.2-137.2,22.5C-10.8,458.8-7.7,552.4,18,635.8c15.4,50.1,34.2,99.4,80.4,127.2
		c49.2,29.6,133.9,44.6,189.5,26c125.1-41.8,182.8-171.6,293.9-233.3c97.1-53.9,215.3-39.9,314.6-1c60.1,23.5,140.8,47.6,206.3,32.3
		c55.5-12.9,77.4-82.5,88.1-130.4c20.8-93.8,9.7-197.8-68.7-262.4c-62.6-51.6-153.9-54.7-229-77.8C797.9,87,718.6,23.9,620.4,6.8
		C607.7,4.6,591.3,1.9,573.1,0.4z" fill="#fff" />';
	break;
	
	default:
	break;
}

$image_url = octagon_get_cropped_url( $image );
$uid = octagon_random();
?>

<div class="<?php echo esc_attr( implode( ' ', $wrapper_class ) ); ?>">
	
	<svg viewBox="<?php echo esc_attr( $viewbox ); ?>">
	<mask id="<?php echo esc_attr( $uid ); ?>">
		<?php echo wp_kses( $path, array( 'path' => array( 'd' => array(), 'fill' => array() ) ) ); ?>
	</mask>

	<image width="100%" height="100%" preserveAspectRatio="xMidYMid slice" xlink:href="<?php echo esc_url( $image_url ); ?>" mask="url(#<?php echo esc_attr( $uid ); ?>)"></image>
	</svg>

</div> <!-- .image-box -->